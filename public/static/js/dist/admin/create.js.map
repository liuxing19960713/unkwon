{"version":3,"sources":["admin/create.js"],"names":["define","formSubmit","submit_data","name","$","val","account","admin_rank","url","appConfig","adminPath","loader","ajax","data","dataType","success","errcode","BootstrapDialog","show","message","buttons","label","action","dialogItself","location","href","onhide","dialogRef","errmsg","close","validate","submitHandler","form","ignore","rules","required","errorPlacement","error","element","addClass","after","errorElement","messages"],"mappings":"AAAAA,OAAO,WACH,MAAO,YAiDH,QAASC,KACL,GAAIC,IACAC,KAAQC,EAAE,oBAAoBC,MAC9BC,QAAWF,EAAE,uBAAuBC,MACpCE,WAAcH,EAAE,2BAA2BC,OAG3CG,EAAMC,UAAUC,UAAY,aAEhCN,GAAEO,QAAO,GAETP,EAAEQ,MACEJ,IAAKA,EACLK,KAAMX,EACNY,SAAU,OACVC,QAAS,SAAUF,GACfT,EAAEO,QAAO,GACU,GAAhBE,EAAKG,QACJC,gBAAgBC,MACZC,QAAS,OACTC,UACIC,MAAO,KACPC,OAAQ,SAASC,GACbnB,EAAEO,QAAO,GACTa,SAASC,KAAOhB,UAAUC,UAAY,iBAG9CgB,OAAQ,SAASC,GACbvB,EAAEO,QAAO,GACTa,SAASC,KAAOhB,UAAUC,UAAY,iBAI9CO,gBAAgBC,MACZC,QAASN,EAAKe,OACdR,UACIC,MAAO,KACPC,OAAQ,SAASC,GACbA,EAAaM,gBAvEzCzB,EAAE,SAAS0B,UACPC,cAAe,SAASC,GACpB/B,KAEJgC,OAAQ,GACRC,OACI/B,MACIgC,UAAU,GAEd7B,SACI6B,UAAU,IAIlBC,eAAgB,SAASC,EAAOC,GAE5BlC,EAAEiC,GAAOE,SAAS,sBAClBnC,EAAGkC,GACEE,MAAOH,IAEhBI,aAAc,MACdC,UACIvC,MACIgC,SAAU,QAEd7B,SACI6B,SAAU","file":"create.js","sourcesContent":["define(function (){\n    return function(){\n\n        // // 选择普通管理员时显示区域选择\n        // $(\"#admin_rank\").change(function(){\n        //     if($(this).val() < 10){\n        //         $(\"#block_area\").show();\n        //         var $firstAreaName = $(\"#block_area\").find('input[type=radio]').get(0);\n        //         if($firstAreaName[0]){\n        //             $firstAreaName.click();\n        //         }\n        //     }else{\n        //         $(\"#block_area\").hide();\n        //     }\n        // });\n\n        // 验证表单\n        $(\"#form\").validate({\n            submitHandler: function(form){   //表单提交句柄,为一回调函数，带一个参数：form\n                formSubmit();\n            },\n            ignore: \"\",\n            rules: {\n                'name': {\n                    required: true\n                },\n                'account': {\n                    required: true,\n                    // mobileCN: true,\n                },\n            },\n            errorPlacement: function(error, element) {\n                // Append error within linked label\n                $(error).addClass('alert alert-danger');\n                $( element )\n                    .after( error );\n            },\n            errorElement: \"div\",\n            messages: {\n                'name': {\n                    required: \"名字必填\",\n                },\n                'account': {\n                    required: \"帐号必填\",\n                    // mobileCN: '手机号码格式错误',\n                },\n            }\n\n        });\n\n        function formSubmit(){\n            var submit_data = {\n                'name': $(\"input[name=name]\").val(),\n                'account': $(\"input[name=account]\").val(),\n                'admin_rank': $(\"select[name=admin_rank]\").val(),\n            };\n\n            var url = appConfig.adminPath + 'Admin/store';\n\n            $.loader(true);\n\n            $.ajax({\n                url: url,\n                data: submit_data,\n                dataType: 'json',\n                success: function (data) {\n                    $.loader(false);\n                    if(data.errcode == 0){\n                        BootstrapDialog.show({\n                            message: '新增成功',\n                            buttons: [{\n                                label: '关闭',\n                                action: function(dialogItself){\n                                    $.loader(true);\n                                    location.href = appConfig.adminPath + 'Admin/index';\n                                }\n                            }],\n                            onhide: function(dialogRef){\n                                $.loader(true);\n                                location.href = appConfig.adminPath + 'Admin/index';\n                            }\n                        });\n                    }else{\n                        BootstrapDialog.show({\n                            message: data.errmsg,\n                            buttons: [{\n                                label: '关闭',\n                                action: function(dialogItself){\n                                    dialogItself.close();\n                                }\n                            }]\n                        });\n                    }\n                }\n            });\n        }\n    };\n});"]}