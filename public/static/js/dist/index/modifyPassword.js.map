{"version":3,"sources":["index/modifyPassword.js"],"names":["define","formSubmit","submit_data","old_password","$","val","new_password","url","appConfig","adminPath","loader","ajax","type","data","dataType","success","BootstrapDialog","show","message","buttons","label","action","dialogItself","location","href","onhide","dialogRef","errmsg","close","click","this","hasClass","removeClass","addClass","attr","validate","submitHandler","form","ignore","rules","required","repeat_password","equalTo","errorPlacement","error","element","after","errorElement","messages"],"mappings":"AACAA,OAAO,WACH,MAAO,YAuDH,QAASC,KACL,GAAIC,IACAC,aAAgBC,EAAE,4BAA4BC,MAC9CC,aAAgBF,EAAE,4BAA4BC,OAG9CE,EAAMC,UAAUC,UAAY,4BAEhCL,GAAEM,QAAO,GAETN,EAAEO,MACEJ,IAAKA,EACLK,KAAM,OACNC,KAAMX,EACNY,SAAU,OACVC,QAAS,SAAUF,GACfT,EAAEM,QAAO,GACNG,EAAKE,QACJC,gBAAgBC,MACZC,QAAS,OACTC,UACIC,MAAO,KACPC,OAAQ,SAASC,GACblB,EAAEM,QAAO,GACTa,SAASC,KAAOhB,UAAUC,UAAY,iBAG9CgB,OAAQ,SAASC,GACbtB,EAAEM,QAAO,GACTa,SAASC,KAAOhB,UAAUC,UAAY,iBAI9CO,gBAAgBC,MACZC,QAASL,EAAKc,OACdR,UACIC,MAAO,KACPC,OAAQ,SAASC,GACbA,EAAaM,gBA5FzCxB,EAAE,sBAAsByB,MAAM,WACvBzB,EAAE0B,MAAMC,SAAS,WAChB3B,EAAE0B,MAAME,YAAY,UAAUC,SAAS,gBACvC7B,EAAE,4BAA4B8B,KAAK,OAAQ,YAC3C9B,EAAE,4BAA4B8B,KAAK,OAAQ,YAC3C9B,EAAE,+BAA+B8B,KAAK,OAAQ,cAE9C9B,EAAE0B,MAAME,YAAY,gBAAgBC,SAAS,UAC7C7B,EAAE,4BAA4B8B,KAAK,OAAQ,QAC3C9B,EAAE,4BAA4B8B,KAAK,OAAQ,QAC3C9B,EAAE,+BAA+B8B,KAAK,OAAQ,WAKtD9B,EAAE,SAAS+B,UACPC,cAAe,SAASC,GACpBpC,KAEJqC,OAAQ,GACRC,OACIpC,cACIqC,UAAU,GAEdlC,cACIkC,UAAU,GAEdC,iBACID,UAAU,EACVE,QAAS,6BAGjBC,eAAgB,SAASC,EAAOC,GAE5BzC,EAAEwC,GAAOX,SAAS,sBAClB7B,EAAGyC,GACEC,MAAOF,IAEhBG,aAAc,MACdC,UACI7C,cACIqC,SAAU,SAEdlC,cACIkC,SAAU,SAEdC,iBACID,SAAU,UACVE,QAAS","file":"modifyPassword.js","sourcesContent":["// 修改密码页面JS逻辑\ndefine(function (){\n    return function(){\n        $(\"#icon_see_password\").click(function(){\n            if($(this).hasClass(\"fa-eye\")){\n                $(this).removeClass(\"fa-eye\").addClass(\"fa-eye-slash\");\n                $(\"input[name=new_password]\").attr('type', 'password');\n                $(\"input[name=old_password]\").attr('type', 'password');\n                $(\"input[name=repeat_password]\").attr('type', 'password');\n            }else{\n                $(this).removeClass(\"fa-eye-slash\").addClass(\"fa-eye\");\n                $(\"input[name=new_password]\").attr('type', 'text');\n                $(\"input[name=old_password]\").attr('type', 'text');\n                $(\"input[name=repeat_password]\").attr('type', 'text');\n            }\n        });\n\n        // 验证表单\n        $(\"#form\").validate({\n            submitHandler: function(form){\n                formSubmit();\n            },\n            ignore: \"\",\n            rules: {\n                'old_password': {\n                    required: true\n                },\n                'new_password': {\n                    required: true,\n                },\n                'repeat_password': {\n                    required: true,\n                    equalTo: 'input[name=new_password]',\n                },\n            },\n            errorPlacement: function(error, element) {\n                // Append error within linked label\n                $(error).addClass('alert alert-danger');\n                $( element )\n                    .after( error );\n            },\n            errorElement: \"div\",\n            messages: {\n                'old_password': {\n                    required: \"原密码必填\",\n                },\n                'new_password': {\n                    required: \"新密码必填\",\n                },\n                'repeat_password': {\n                    required: \"重复新密码必填\",\n                    equalTo: \"两次输入的密码不相同\"\n                },\n            }\n\n        });\n\n        function formSubmit(){\n            var submit_data = {\n                'old_password': $(\"input[name=old_password]\").val(),\n                'new_password': $(\"input[name=new_password]\").val(),\n            };\n\n            var url = appConfig.adminPath + 'Index/modifyPasswordSubmit';\n\n            $.loader(true);\n\n            $.ajax({\n                url: url,\n                type: \"POST\",\n                data: submit_data,\n                dataType: 'json',\n                success: function (data) {\n                    $.loader(false);\n                    if(data.success){\n                        BootstrapDialog.show({\n                            message: '修改成功',\n                            buttons: [{\n                                label: '关闭',\n                                action: function(dialogItself){\n                                    $.loader(true);\n                                    location.href = appConfig.adminPath + 'Login/index';\n                                }\n                            }],\n                            onhide: function(dialogRef){\n                                $.loader(true);\n                                location.href = appConfig.adminPath + 'Login/index';\n                            }\n                        });\n                    }else{\n                        BootstrapDialog.show({\n                            message: data.errmsg,\n                            buttons: [{\n                                label: '关闭',\n                                action: function(dialogItself){\n                                    dialogItself.close();\n                                }\n                            }]\n                        });\n                    }\n                }\n            });\n        }\n    };\n});"]}